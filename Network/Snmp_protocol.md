# SNMP 프로토콜 정의

SNMP(Simple Network Management Protocol)는 네트워크 장비 및 기타 장치에서 정보를 수집하고 관리 작업을 수행하기 위한 애플리케이션 계층 프로토콜입니다. 주로 네트워크 모니터링 및 관리에 사용됩니다.

---

## SNMP의 주요 특징

### 구조

SNMP는 Manager와 Agent로 구성됩니다.
- **Manager**: 데이터를 요청하고 수집하며, 장비를 관리합니다. (예: PRTG)
- **Agent**: 네트워크 장비에 설치되어 데이터를 제공하는 역할을 합니다.
- 정보는 **MIB(Management Information Base)**라는 데이터베이스에 저장된 객체로 관리됩니다.

### 동작 방식

- **Polling**: SNMP Manager가 Agent에 요청(GET, GET-NEXT, SET)을 보내 데이터를 가져옵니다.
- **Trap**: Agent가 사전 정의된 조건에서 Manager로 데이터를 능동적으로 전송.

### 사용 포트

- 기본적으로 **UDP 161번** 포트를 사용(Manager ↔ Agent).
- Trap 메시지는 **UDP 162번** 포트에서 수신.

### 경량 프로토콜

- HTTP와 달리 경량으로 설계되어 인터넷 통신이 아닌 내부 네트워크 환경에서 동작에 적합.
- TCP 대신 UDP를 사용하므로 연결 상태를 유지하지 않습니다.

---

## SNMP와 HTTP의 차이점

| **구분**       | **SNMP**                                 | **HTTP**                            |
|----------------|------------------------------------------|-------------------------------------|
| **프로토콜 계층** | 애플리케이션 계층 (UDP 기반)              | 애플리케이션 계층 (TCP 기반)         |
| **주요 용도**   | 네트워크 장비 관리 및 모니터링             | 웹 서비스 및 API 통신               |
| **통신 방식**   | UDP 기반 (비연결형, 경량화)               | TCP 기반 (연결형, 신뢰성 보장)       |
| **데이터 전송** | 폴링(Polling)과 Trap 방식                 | 요청(Request)-응답(Response) 방식   |
| **속도**       | 빠르지만 신뢰성이 낮음                     | 느릴 수 있지만 신뢰성 높음           |
| **인터넷 의존성**| 인터넷 없이도 로컬 네트워크에서 사용 가능 | 인터넷 또는 네트워크 연결 필요        |

---

## 인터넷 통신 여부

### SNMP

- SNMP는 일반적으로 **인터넷 연결 없이** 로컬 네트워크 내에서 사용됩니다.
- 하지만 원격 장비 관리 시, 인터넷을 통해 통신할 수 있습니다. 이 경우에도 TCP 대신 UDP를 사용하는 점이 차이점입니다.

### HTTP (예: Datadog Agent)

- HTTP는 인터넷 연결이 필수적이며, API 서버와 연결되어 데이터를 전송합니다.
- TCP 기반이므로 연결 상태를 지속적으로 유지하며 안정성을 보장하지만, 오버헤드가 클 수 있습니다.

---

## PRTG와 Datadog 비교

### PRTG SNMP Agent

- 네트워크 장비 내부 데이터를 UDP로 가져오기 때문에 인터넷 연결 없이도 작동 가능.
- Trap 방식으로 실시간 알림이 가능하며, 장비가 로컬 네트워크 내에 존재하면 별도 인터넷 통신이 필요 없음.

### Datadog HTTP Agent

- HTTP 프로토콜을 통해 Datadog 서버로 데이터를 전송하며, 인터넷 연결이 필수적.
- 데이터를 Cloud에 저장하고 분석하는 SaaS 형태로 동작.
